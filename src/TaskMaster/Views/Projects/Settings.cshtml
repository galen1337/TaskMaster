@model TaskMaster.Models.ProjectSettingsViewModel

@{
	ViewData["Title"] = "Project Settings";
}

<div class="container">
	<div class="row justify-content-center">
		<div class="col-md-8">
			<div class="card">
				<div class="card-header">
					<div class="d-flex justify-content-between align-items-center">
						<h4 class="mb-0"><i class="bi bi-gear"></i> Project Settings</h4>
						<a href="@Url.Action("Details", new { id = Model.Id })" class="btn btn-outline-secondary">
							<i class="bi bi-arrow-left"></i> Back to Project
						</a>
					</div>
				</div>
				<div class="card-body">
					<!-- Edit Project Form -->
					<form asp-action="Settings" method="post">
						@Html.AntiForgeryToken()
						<input type="hidden" asp-for="Id" />
						
						<div asp-validation-summary="ModelOnly" class="alert alert-danger"></div>

						<div class="mb-3">
							<label asp-for="Name" class="form-label"></label>
							<input asp-for="Name" class="form-control" />
							<span asp-validation-for="Name" class="text-danger"></span>
						</div>

						<div class="mb-3">
							<label asp-for="Description" class="form-label"></label>
							<textarea asp-for="Description" class="form-control" rows="4"></textarea>
							<span asp-validation-for="Description" class="text-danger"></span>
						</div>

						<div class="mb-4">
							<button type="submit" class="btn btn-primary">
								<i class="bi bi-check2"></i> Save Changes
							</button>
						</div>
					</form>

					<hr class="my-4">

					<!-- Danger Zone -->
					<div class="card border-danger">
						<div class="card-header bg-danger text-white">
							<h5 class="mb-0"><i class="bi bi-exclamation-triangle"></i> Danger Zone</h5>
						</div>
						<div class="card-body">
							<p class="text-muted mb-3">
								<strong>Delete this project:</strong> Once you delete a project, there is no going back. 
								This will permanently delete the project, all boards, cards, and member data.
							</p>
							<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteProjectModal">
								<i class="bi bi-trash"></i> Delete Project
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteProjectModal" tabindex="-1" aria-labelledby="deleteProjectModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header bg-danger text-white">
				<h5 class="modal-title" id="deleteProjectModalLabel">
					<i class="bi bi-exclamation-triangle"></i> Confirm Deletion
				</h5>
				<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<p><strong>Are you sure you want to delete this project?</strong></p>
				<p class="text-muted">This action cannot be undone. This will permanently delete:</p>
				<ul class="text-muted">
					<li>The project "<strong>@Model.Name</strong>"</li>
					<li>All boards and their columns</li>
					<li>All cards and comments</li>
					<li>All member associations</li>
				</ul>
				<p class="text-danger"><strong>This action is irreversible!</strong></p>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
				<form asp-action="Delete" method="post" class="d-inline">
					@Html.AntiForgeryToken()
					<input type="hidden" name="id" value="@Model.Id" />
					<button type="submit" class="btn btn-danger">
						<i class="bi bi-trash"></i> Yes, Delete Project
					</button>
				</form>
			</div>
		</div>
	</div>
</div>

@section Scripts {
	<partial name="_ValidationScriptsPartial" />
} 